{% extends "base.html" %}

{% block title %}Prediction Result{% endblock %}

{% block content %}
<div class="card p-4  col-md-6" style="max-width: 800px; margin: 0 auto;">
    <h2 class="text-center mb-4">Prediction Result</h2>

    <!-- Patient Name -->
    <p><strong>Patient Name:</strong> {{ patient_name }}</p>

    <!-- Uploaded Image -->
    <div class="text-center mb-4">
        <img src="{{ image_url }}" alt="Uploaded MRI Image" style="max-width: 80%; height: auto; border: 1px solid #ddd; padding: 5px; border-radius: 5px;">
    </div>

    <!-- Prediction Result -->
    <div class="alert alert-info text-center">
        <h4>Prediction: {{ prediction }}</h4>
        <p>Probability: {{ probability }}%</p>
    </div>

    <!-- Opinion Form (visible only to doctors and admins) -->
    {% if user_role in ['doctor', 'admin'] %}
    <div class="mt-4">
        <h4>Provide Your Opinion</h4>
        <form action="/add_opinion" method="POST">
            <input type="hidden" name="patient_id" value="{{ patient_id }}">
            <input type="hidden" name="prediction_id" value="{{ prediction_id }}">

            <div class="form-group">
                <textarea name="opinion" class="form-control" rows="4" placeholder="Enter your opinion about the prediction..." required></textarea>
            </div>

	    <div class="form-group form-check">
                <input type="checkbox" class="form-check-input" id="reviewed" name="reviewed">
                <label for="reviewed" class="form-check-label">Mark as Reviewed</label>
            </div>

            <button type="submit" class="btn btn-primary btn-block">Submit Opinion</button>
        </form>
    </div>
    {% endif %}
    <a href="/upload_form" class="btn btn-login mt-4">Try Another Image</a>
</div>
{% endblock %}

